# III. 파일 속성과 디렉터리

```c
#include <sys/stat.h>
#include <unistd.h>

int stat(const char *restrict pathname, const struct stat *restrict buf);
int fstat(int filedes, const struct stat *buf);
int lstat(const char *restrict pathname, const struct stat *restrict buf);

//반환값 : 성공 시 0, 오류 발생 시 -1을 반환하고 errno가 설정됨
```





## 4. umask(2)

```c
#include <sys/stat.h>
mode_t umask(mode_t cmask);

//반환값 : 이전의 파일 모드 생성 마스크
```

- umask값
    - file mode creation mask (파일접근모드 생성 마스크)
    - 파일/디렉터리를 생성하는 시스템호출 시 프로세스의 umask값을 참조하여 특정한 접근허가를 막음
    - i.e. umask값 = 0011이면 파일 생성 시 모드값으로 0777로 설정하더라도 umask값과 XOR 연산하여 0766으로 모드값 변경하여 파일을 생성
- umaks()
    - 프로세스 내에서 일시적으로 umask값을 일시적으로 변경시킴
    - 프로세스가 종료되면 부모 프로세스는 원래의 umaks값으로 되돌아옴
- cmask : 생성할 파일의 접근 권한을 나타내는 mode 인자

플래그 | 내용 | 8진수
------- | --------------------------------- | ------
S_IRWXU | 파일 소유자의 읽기, 쓰기, 실행권한 지정 | 00700
S_IRUSR | 파일 소유자의 읽기권한 지정 | 00400
S_IWUSR | 파일 소유자의 쓰기권한 지정 | 00200
S_IXUSR | 파일 소유자의 실행권한 지정  | 00100
S_IRWXG | 그룹 사용자의 읽기, 쓰기, 실행권한 지정 | 00070
S_IRGRP | 그룹 사용자의 읽기권한 지정 | 00040
S_IWGRP | 그룹 사용자의 쓰기권한 지정 | 00020
S_IXGRP | 그룹 사용자의 실행권한 지정 | 00010
S_IRWXO | 다른 사용자의 읽기, 쓰기, 실행권한 지정 | 00007
S_IROTH | 다른 사용자의 읽기권한 지정 | 00004
S_IWOTH | 다른 사용자의 쓰기권한 지정 | 00002
S_IXOTH | 다른 사용자의 쓰기 권한 지정 | 00001
